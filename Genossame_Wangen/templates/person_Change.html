{% extends 'base.html' %}

{% block content %}
<div class="container">
    <h1>{{ details.ID }} {{ details.Anrede_Long_Long }} {{ details.Geburtstag }}</h1>
        <form id="updateForm">
        <div class="form-row">
            <div class="form-group col-md-1">
                <label for="anrede" class="col-form-label">Anrede:</label>
                <div class="input-group">
                    <select class="form-control" id="anrede" name="anrede" required>
                        <option value="Herr">Herr</option>
                        <option value="Frau">Frau</option>
                        <option value="Familie">Familie</option>
                    </select>
                </div>
            </div>

            <div class="form-group col-md-2">
                <label for="firstName" class="col-form-label">Vorname:</label>
                <div class="input-group">
                    <input type="text" class="form-control" id="firstName" name="firstName" maxlength="45" value="Walter" required>
                </div>
            </div>

            <div class="form-group col-md-2">
                <label for="ledigName" class="col-form-label">Ledig Name:</label>
                <input type="text" class="form-control" id="ledigName" name="ledigName" maxlength="45" value="Rothlin" required>
            </div>

            <div class="form-group col-md-4">
                <label for="partnerName" class="col-form-label">Partner Name:</label>
                <input type="text" class="form-control" id="partnerName" name="partnerName" pattern="^[A-Z][a-zA-Z]{5,}$" maxlength="20" value="Collet" required>
                <small id="lastNameHelp" class="form-text text-muted">Must start with an uppercase letter and have a minimum of 6 characters.</small>
            </div>

            <div class="form-group col-md-3">
                <label for="partnerNameAngenommen" class="col-form-label">Angenommen:</label>
                <div class="form-check">
                    <input type="checkbox" class="form-check-input" id="partnerNameAngenommenYes" name="partnerNameAngenommen" value="Yes">
                    <label class="form-check-label" for="partnerNameAngenommenYes">Partner Name angenommen</label>
                </div>
            </div>
        </div>

        <div class="form-row">
            <div class="form-group col-md-3">
                <label for="Kategorien" class="col-form-label">Kategorien:</label>
                <div class="form-check">
                    <input type="checkbox" class="form-check-input" id="Kategorie_Buerger" name="Kategorien" value="Bürger">
                    <label class="form-check-label" for="Kategorie_Buerger">Bürger</label>
                </div>
                <div class="form-check">
                    <input type="checkbox" class="form-check-input" id="Kategorie_Nutzungsberechtigt" name="Kategorien" value="Nutzungsberechtigt" checked>
                    <label class="form-check-label" for="Kategorie_Nutzungsberechtigt">Nutzungsberechtigt</label>
                </div>
                <div class="form-check">
                    <input type="checkbox" class="form-check-input" id="Kategorie_Verwaltungsberechtigt" name="Kategorien" value="Verwaltungsberechtigt">
                    <label class="form-check-label" for="Kategorie_Verwaltungsberechtigt">Verwaltungsberechtigt</label>
                </div>
            </div>
        </div>

        <div class="form-group">
            <label for="dob" class="col-form-label">Geburtsdatum:</label>
            <input type="date" class="form-control" id="dob" name="dob" required>
        </div>

        <button type="button" class="btn btn-primary" onclick="updateValues()">Aenderungen Speichern</button>
        <button type="reset" class="btn btn-secondary">Reset</button>
    </form>

    <!-- Add Bootstrap JS and Popper.js scripts (required for Bootstrap components) -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <script>
        function updateValues() {
            // Get values from the form
            var anrede = document.getElementById("anrede").value;
            var firstName = document.getElementById("firstName").value;
            var ledigName = document.getElementById("ledigName").value;
            var partnerName = document.getElementById("partnerName").value;
            var partnerNameAngenommen = document.getElementById("partnerNameAngenommenYes").checked ? "Yes" : "No";
            var Kategorie_Buerger = document.getElementById("Kategorie_Buerger").checked;
            var Kategorie_Nutzungsberechtigt = document.getElementById("Kategorie_Nutzungsberechtigt").checked;
            var Kategorie_Verwaltungsberechtigt = document.getElementById("Kategorie_Verwaltungsberechtigt").checked;
            var dob = document.getElementById("dob").value;

            // Perform the update or send values to the server using AJAX
            // For simplicity, this example just logs the values to the console
            console.log("Updating values:");
            console.log("Anrede: " + anrede);
            console.log("Vorname: " + firstName);
            console.log("Ledig Name: " + ledigName);
            console.log("Partner Name: " + partnerName);
            console.log("Partner Name Angenommen: " + partnerNameAngenommen);
            console.log("Kategorie Bürger: " + Kategorie_Buerger);
            console.log("Kategorie Nutzungsberechtigt: " + Kategorie_Nutzungsberechtigt);
            console.log("Kategorie Verwaltungsberechtigt: " + Kategorie_Verwaltungsberechtigt);
            console.log("Geburtsdatum: " + dob);

            // You can add further logic here to update values in the database or perform other actions

            // Mark changed input fields with a red background
            markChangedFields();
        }

        function markChangedFields() {
            // Get all input elements in the form
            var inputElements = document.querySelectorAll('#updateForm input');

            // Loop through each input element
            inputElements.forEach(function (element) {
                // Check if the value has changed
                if (element.defaultValue !== element.value) {
                    // Add the 'changed' class to mark the field as changed
                    element.classList.add('changed');
                }
            });
        }
    </script>
</div>
{% endblock %}