<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<!--
    Source:    ./DatenFiles/HTML/FormTest_formHandler.html
    Published: https://hwz.peterliwiese.ch/examples/FormTest_formHandler.html



	Ehrenwörtliche Erklärung
	------------------------

	Hiermit bestätige ich, Daniel Ivkovic, diesen Leistungsnachweis
	ohne fremde Hilfe nur mit den erlaubten Hilfsmittel während der offiziellen
	vereinbarten Zeitdauer erstellt zu haben.

	Bewertung
	---------
	1) Richtiger Filename / Ehrenwörtliche Erklärung
	2) Korrekte Formatierung
	3) Korrektes XHTML
	4) Korrekte zusätzliche Felder (inkl. title und body)
	5) CSS eingebunden
	6) Erweitertes Antwort-Template eingebunden
	7) Feldernamen entsprechend neuem Antwort-Template angepasst
	8) Postleitzahl wird Clientseitig überprüft (korrigiert)
	9) Warnungs-Symbol mit CSS-Style zugefügt
	10) Eventhadler eingebaut und Symbole ändern
	                                                                 --------
	                                                         Punkte:
	                                                                 --------
	                                       Note = 0.5 * Punkte + 1 =   4.0
	                                                                 ========
	-->
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Anmeldeformular für Geschäftsanlasse</title>
</head>
<body>
    <h1>Anmeldeformular für Geschäftsanlasse</h1>
    
    <form method="post" action="">
        <p>Hiermit melde ich mich für den Anlass vom</p>
        
        <div>
            <label for="name">Name:</label>
            <input type="text" id="name" name="name" />
        </div>
        
        <div>
            <label for="vorname">Vorname:</label>
            <input type="text" id="vorname" name="vorname" />
        </div>
        
        <div>
            <label for="email">email:</label>
            <input type="email" id="email" name="email" />
        </div>
        
        <div>
            <label for="plz">PLZ:</label>
            <input type="text" id="plz" name="plz" size="5" />
            <label for="ort">Ort:</label>
            <input type="text" id="ort" name="ort" />
        </div>
        
        <div>
            <p>ÖV Vergünstigung:</p>
            <input type="radio" id="nichts" name="vergünstigung" value="nichts" />
            <label for="nichts">Nichts</label>
            <input type="radio" id="halbpreis" name="vergünstigung" value="halbpreis" />
            <label for="halbpreis">1/2 Preis</label>
            <input type="radio" id="ga" name="vergünstigung" value="ga" />
            <label for="ga">GA</label>
        </div>
        
        <div>
            <input type="checkbox" id="vegan" name="mittagessen" value="vegan" />
            <label for="vegan">Mittagessen: Vegan</label>
        </div>
        
        <div>
            <label for="begleitung">Komme in Begleitung von</label>
            <select id="begleitung" name="begleitung">
                <option value="keiner">keiner</option>
                <option value="einer">einer</option>
                <option value="zwei">zwei</option>
                <option value="drei">drei</option>
            </select>
            <span>weiteren Person(en)</span>
        </div>
        
        <div>
            <label for="kommentar">Kommentar</label><br />
            <textarea id="kommentar" name="kommentar" rows="5" cols="40"></textarea>
        </div>
        
        <div>
            <input type="submit" value="Anmelden" />
            <input type="reset" value="Eingaben löschen" />
        </div>
    </form>
</body>
    <link rel="stylesheet" href="https://hwz.peterliwiese.ch/examples/CSS_HWZ_Style_01.css">
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.querySelector('form');
            form.addEventListener('submit', function(e) {
                e.preventDefault();
                const formData = new FormData(form);
                const name = formData.get('name');
                
                document.body.innerHTML = `
                    <h1>Provisorische Anmeldebestätigung</h1>
                    <p>Vielen Dank ${name} für Ihre Anmeldung</p>
                    <p>Sie werden in den nächsten Tagen eine Bestätigung an daniel.ivkovic@student.fh-hwz.ch bekommen</p>
                    <p>Ihre Angaben wurden an anmeldung@peterliwiese.ch übermittelt!</p>
                    <p>Vielen Dank<br>
                    Walter Rothlin (Reiseführer)</p>
                `;
            });
        });
    </script>
    <link rel="stylesheet" href="https://hwz.peterliwiese.ch/examples/CSS_HWZ_Style_01.css">
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.querySelector('form');
            form.addEventListener('submit', function(e) {
                e.preventDefault();
                const formData = new FormData(form);
                const name = formData.get('name');
                const begleitung = formData.get('begleitung');
                const mittagessen = formData.getAll('mittagessen');
                const kommentar = formData.get('kommentar');
                
                document.body.innerHTML = `
                    <div class="container">
                        <h1>Provisorische Anmeldebestätigung</h1>
                        <p>Vielen Dank ${name} für Ihre Anmeldung</p>
                        <p>Sie kommen mit ${begleitung} weiteren Person(en)</p>
                        <p>Ihre Menüwahl: ${mittagessen.join(', ')}</p>
                        <p>Ihr Kommentar: ${kommentar}</p>
                        <p>Sie werden in den nächsten Tagen eine Bestätigung an daniel.ivkovic@student.fh-hwz.ch bekommen</p>
                        <p>Ihre Angaben wurden an anmeldung@peterliwiese.ch übermittelt!</p>
                        <p>Vielen Dank<br>
                        Walter Rothlin (Reiseführer)</p>
                    </div>
                `;
            });
        });
    </script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.querySelector('form');
            form.addEventListener('submit', function(e) {
                e.preventDefault();
                const formData = new FormData(form);
                const name = formData.get('name');
                const vorname = formData.get('vorname');
                const email = formData.get('email');
                const plz = formData.get('plz');
                const vergünstigung = formData.get('vergünstigung');
                const begleitung = formData.get('begleitung');
                const mittagessen = formData.getAll('mittagessen');
                const kommentar = formData.get('kommentar');

                document.body.innerHTML = `
                    <div class="container">
                        <h1>Anmeldebestätigung</h1>
                        <p>Vielen Dank ${vorname} ${name} für Ihre Anmeldung!</p>
                        <p>Folgende Angaben wurden an anmeldung@peterliwiese.ch übermittelt!</p>
                        <p>Name: ${name}</p>
                        <p>Vorname: ${vorname}</p>
                        <p>Email: ${email}</p>
                        <p>PLZ: ${plz}</p>
                        <p>ÖV Vergünstigung: ${vergünstigung}</p>
                        <p>Mittagessen: ${mittagessen.join(', ')}</p>
                        <p>Ich komme in Begleitung von ${begleitung} weiteren Person(en)</p>
                        <p>Ihr Kommentar: ${kommentar}</p>
                        <p>Sie werden in den nächsten Tagen eine Bestätigung an ${email} bekommen</p>
                        <p>Vielen Dank<br>
                        Walter Rothlin (Reiseführer)</p>
                    </div>
                `;
            });
        });
    </script>
    <script>
        function validatePLZ(input) {
            // Entferne alle Nicht-Ziffern
            input.value = input.value.replace(/\D/g, '');
            
            // Begrenze auf 4 Stellen
            if (input.value.length > 4) {
                input.value = input.value.slice(0, 4);
            }
            
            // Prüfe ob 4-stellig
            if (input.value.length === 4) {
                input.setCustomValidity('');
            } else {
                input.setCustomValidity('Bitte geben Sie eine 4-stellige PLZ ein');
            }
        }

        // Event-Handler für PLZ-Feld hinzufügen
        document.addEventListener('DOMContentLoaded', function() {
            const plzInput = document.querySelector('input[name="plz"]');
            plzInput.addEventListener('input', function() {
                validatePLZ(this);
            });
        });
    </script>
    <style>
        .warning-icon {
            width: 20px;
            height: 20px;
            vertical-align: middle;
            margin-left: 5px;
        }
    </style>
    <script>
        function validateName(input) {
            const value = input.value;
            const isValid = /^[A-Z][a-zA-Z]*$/.test(value);
            const warningIcon = input.nextElementSibling;
            
            if (isValid) {
                warningIcon.src = 'https://www.peterliwiese.ch/img/Verified.svg';
                input.setCustomValidity('');
            } else {
                warningIcon.src = 'https://www.peterliwiese.ch/img/Warning.svg';
                if (!/^[A-Z]/.test(value)) {
                    input.setCustomValidity('Der erste Buchstabe muss groß sein');
                } else if (/[äöüÄÖÜ]/.test(value)) {
                    input.setCustomValidity('Keine Umlaute erlaubt');
                } else if (/\s/.test(value)) {
                    input.setCustomValidity('Keine Leerzeichen erlaubt');
                } else {
                    input.setCustomValidity('Ungültige Eingabe');
                }
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            const nameInput = document.querySelector('input[name="name"]');
            const vornameInput = document.querySelector('input[name="vorname"]');
            const ortInput = document.querySelector('input[name="ort"]');

            [nameInput, vornameInput, ortInput].forEach(input => {
                // Erstelle und füge das Warnung-Icon hinzu
                const warningIcon = document.createElement('img');
                warningIcon.className = 'warning-icon';
                warningIcon.src = 'https://www.peterliwiese.ch/img/Warning.svg';
                input.parentNode.insertBefore(warningIcon, input.nextSibling);

                // Füge Event-Listener hinzu
                input.addEventListener('input', function() {
                    validateName(this);
                });
            });
        });
    </script>
    <style>
        h1 {
            color: red;
        }
    </style>
    <script>
</html>