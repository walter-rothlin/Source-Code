<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="de" xml:lang="de">
<head>
    <!--
        Source:    ./DatenFiles/HTML/FormTest_formHandler.html
        Published: https://hwz.peterliwiese.ch/examples/FormTest_formHandler.html

        Ehrenwörtliche Erklärung
        ------------------------

        Hiermit bestätige ich, Marvin Alla, diesen Leistungsnachweis
        ohne fremde Hilfe nur mit den erlaubten Hilfsmittel während der offiziellen
        vereinbarten Zeitdauer erstellt zu haben.

        Bewertung
        ---------
        1) Richtiger Filename / Ehrenwörtliche Erklärung
        2) Korrekte Formatierung
        3) Korrektes XHTML
        4) Korrekte zusätzliche Felder (inkl. title und body)
        5) CSS eingebunden
        6) Erweitertes Antwort-Template eingebunden
        7) Feldernamen entsprechend neuem Antwort-Template angepasst
        8) Postleitzahl wird Clientseitig überprüft (korrigiert)
        9) Warnungs-Symbol mit CSS-Style zugefügt
        10) Eventhadler eingebaut und Symbole ändern
    -->
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Kundenformular</title>
    <link rel="stylesheet" type="text/css" href="https://hwz.peterliwiese.ch/examples/CSS_HWZ_Style_01.css" />
    <style type="text/css">
        .errorHint {
            color: #cc0000;
            font-size: 12px;
            margin-left: 4px;
        }
    </style>
    <script type="text/javascript">
        var ICON_WARNING = 'https://www.peterliwiese.ch/img/Warning.svg';
        var ICON_OK = 'https://www.peterliwiese.ch/img/Verified.svg';

        function setStatus(iconId, isValid) {
            var icon = document.getElementById(iconId);
            if (icon) {
                icon.src = isValid ? ICON_OK : ICON_WARNING;
            }
        }

        function setHint(hintId, message) {
            var hint = document.getElementById(hintId);
            if (hint) {
                hint.innerHTML = message;
            }
        }

        function validateNameField(input, iconId, baseClass) {
            var isValid = (/^[A-Za-zÄÖÜäöü]+(?: [A-Za-zÄÖÜäöü]+)*$/).test(input.value);
            input.className = baseClass + ' ' + (isValid ? 'valid' : 'error');
            setStatus(iconId, isValid);
            setHint(iconId + 'Hint', isValid ? '' : 'Nur Buchstaben und Leerzeichen erlaubt.');
            return isValid;
        }

        function validateEmailField(input, iconId) {
            var isValid = (/^[^\s@]+@[^\s@]+\.[^\s@]+$/).test(input.value);
            input.className = 'TextboxLong ' + (isValid ? 'valid' : 'error');
            setStatus(iconId, isValid);
            setHint(iconId + 'Hint', isValid ? '' : 'Bitte eine gültige E-Mail-Adresse eingeben.');
            return isValid;
        }

        function validatePLZ(input) {
            var isValid = (/^\d{4}$/).test(input.value);
            input.className = 'TextboxShort ' + (isValid ? 'valid' : 'error');
            setHint('plzHint', isValid ? '' : 'PLZ muss genau 4 Ziffern haben.');
            return isValid;
        }

        function validateForm(evt) {
            var ok = true;
            var nameField = document.getElementById('name');
            var vornameField = document.getElementById('vorname');
            var emailField = document.getElementById('email');
            var plzField = document.getElementById('plz');

            ok = validateNameField(nameField, 'nameStatus', 'TextboxMiddle') && ok;
            ok = validateNameField(vornameField, 'vornameStatus', 'TextboxMiddle') && ok;
            ok = validateEmailField(emailField, 'emailStatus') && ok;
            ok = validatePLZ(plzField) && ok;

            if (!ok && evt && evt.preventDefault) {
                evt.preventDefault();
            }
            return ok;
        }
    </script>
</head>
<body>
    <div>
        <h2>Anmeldeformular für Geschäftsanlasse</h2>
        <p>Hiermit melde ich mich für den Anlass vom</p>
        <form method="get" name="adressForm" action="https://www.peterliwiese.ch/cgi-bin/formHandler.pl" onsubmit="return validateForm(event);">
            <table>
                <tr>
                    <td><label for="name">Name:</label></td>
                    <td>
                        <input id="name" type="text" name="Name" class="TextboxMiddle" placeholder="Muster" oninput="validateNameField(this, 'nameStatus', 'TextboxMiddle');" />
                        <img id="nameStatus" src="https://www.peterliwiese.ch/img/Warning.svg" alt="Warnung" class="statusSymbol" />
                        <span id="nameStatusHint" class="errorHint"></span>
                    </td>
                </tr>
                <tr>
                    <td><label for="vorname">Vorname:</label></td>
                    <td>
                        <input id="vorname" type="text" name="Vorname" class="TextboxMiddle" placeholder="Felix" oninput="validateNameField(this, 'vornameStatus', 'TextboxMiddle');" />
                        <img id="vornameStatus" src="https://www.peterliwiese.ch/img/Warning.svg" alt="Warnung" class="statusSymbol" />
                        <span id="vornameStatusHint" class="errorHint"></span>
                    </td>
                </tr>
                <tr>
                    <td><label for="email">email:</label></td>
                    <td>
                        <input id="email" type="text" name="Email" class="TextboxLong" placeholder="claudia@peterliwiese.ch" oninput="validateEmailField(this, 'emailStatus');" />
                        <img id="emailStatus" src="https://www.peterliwiese.ch/img/Warning.svg" alt="Warnung" class="statusSymbol" />
                        <span id="emailStatusHint" class="errorHint"></span>
                    </td>
                </tr>
                <tr>
                    <td><label for="plz">PLZ:</label></td>
                    <td>
                        <input id="plz" type="text" name="PLZ" class="TextboxShort" maxlength="4" placeholder="8855" oninput="validatePLZ(this);" />
                        <span id="plzHint" class="errorHint"></span>
                        <span class="inline-text">Ort:</span>
                        <input id="ort" type="text" name="Wohnort" class="TextboxMiddle" placeholder="Wangen (SZ)" />
                    </td>
                </tr>
                <tr>
                    <td><label>ÖV Vergünstigung:</label></td>
                    <td>
                        <input type="radio" id="ov-nichts" name="SbbVaucher" value="nichts" checked="checked" />
                        <label class="option-label" for="ov-nichts">Nichts</label>
                        <input type="radio" id="ov-halbtax" name="SbbVaucher" value="halbTax" />
                        <label class="option-label" for="ov-halbtax">1/2 Preis</label>
                        <input type="radio" id="ov-ga" name="SbbVaucher" value="GA" />
                        <label class="option-label" for="ov-ga">GA</label>
                    </td>
                </tr>
                <tr>
                    <td><label for="vegan">Mittagessen:</label></td>
                    <td>
                        <input type="checkbox" id="vegan" name="Vegan" value="on" checked="checked" />
                        <label class="option-label" for="vegan">Vegan</label>
                    </td>
                </tr>
                <tr>
                    <td><label for="begleitung">Komme in Begleitung von</label></td>
                    <td>
                        <select id="begleitung" name="Begleitpersonen">
                            <option value="keiner">keiner</option>
                            <option value="1">einer</option>
                            <option value="2">zwei</option>
                            <option value="3">drei</option>
                        </select>
                        <span class="inline-text">weiteren Person(en)</span>
                    </td>
                </tr>
                <tr>
                    <td><label for="kommentar">Kommentar</label></td>
                    <td><textarea id="kommentar" name="Kommentar" rows="6" cols="60"></textarea></td>
                </tr>
                <tr>
                    <td></td>
                    <td>
                        <input type="submit" name="submitted" value="Anmelden" />
                        <input type="reset" value="Eingaben löschen" />
                    </td>
                </tr>
            </table>
            <hr />
            <!-- Hidden fields to control the formHandler script -->
            <input type="hidden" name="constrain_PLZ" value="isInteger(XXXX,1000,9999,<b>Postleitzahl</b> muss zwischen 1000 und 9999 sein)" />
            <input type="hidden" name="cgiCmdHidden_replyTemplateSuccess" value="http://www.hwz.peterliwiese.ch/examples/testSuccessTemplate_01.html" />
            <input type="hidden" name="cgiCmdHidden_replyTemplateNotSuccess" value="http://www.hwz.peterliwiese.ch/examples/testNotSuccessTemplate.html" />
            <input type="hidden" name="cgiCmdHidden_emailTemplate" value="http://www.hwz.peterliwiese.ch/examples/testEmailTemplate.html" />
            <input type="hidden" name="cgiCmdHidden_emailSubject" value="Antwort (Default as HTML)" />
            <input type="hidden" name="cgiCmdHidden_emailToAddrs" value="anmeldung@peterliwiese.ch" />
            <input type="hidden" name="cgiCmdHidden_emailCcAddrs" value="" />
            <input type="hidden" name="cgiCmdHidden_emailBccAddrs" value="" />
            <input type="hidden" name="cgiCmdHidden_emailFromAddr" value="FormField:Email" />
            <input type="hidden" name="cgiCmdHidden_emailSentAsHTML" value="YES" />
            <input type="hidden" name="cgiCmdHidden_emailTemplate_1" value="http://www.hwz.peterliwiese.ch/examples/testEmailTemplate.txt" />
            <input type="hidden" name="cgiCmdHidden_emailSubject_1" value="Antwort as plain txt mail" />
            <input type="hidden" name="cgiCmdHidden_emailToAddrs_1" value="FormField:Email" />
            <input type="hidden" name="cgiCmdHidden_emailFromAddr_1" value="anmeldung@peterliwiese.ch" />
            <input type="hidden" name="cgiCmdHidden_emailSentAsHTML_1" value="NO" />
            <input type="hidden" name="cgiCmdHidden_countOfEmails" value="2" />
            <input type="hidden" name="cgiCmdHidden_doDebug" value="Yes" />
            <!-- end of hidden fields -->
        </form>
    </div>
</body>
</html>
